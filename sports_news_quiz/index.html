<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buyout Bash - Pixel Suitors</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Monospace:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* Page Background: Black */
            background-color: #000000; 
        }
        .score-font {
            font-family: 'Monospace', monospace; /* Classic retro score look */
        }
        .game-container {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 1024px;
            margin-left: auto;
            margin-right: auto;
            overflow: hidden; 
            /* Container background: White for contrast */
            background-color: #ffffff; 
        }
        canvas {
            display: block;
            /* Game track background: Light Gray */
            background-color: #f3f4f6; 
            border-bottom: 4px solid #1f2937; /* Dark gray ground line */
            touch-action: manipulation;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="game-container rounded-xl">
        <div class="p-4 bg-gray-900 text-white rounded-t-xl">
            <h1 class="text-3xl font-extrabold tracking-tight">ðŸ’° Buyout Bash: Pixel Suitors</h1>
            <p class="text-sm opacity-75">Dodge the $10,000/sec agents! Press **Space** or **Tap** to Jump.</p>
        </div>
        
        <div class="relative">
            <!-- Game Canvas -->
            <canvas id="gameCanvas" width="900" height="300" class="w-full"></canvas>

            <!-- Score Display (Money) -->
            <div id="scoreDisplay" class="absolute top-2 right-4 text-2xl font-black score-font text-gray-700">$0</div>
            
            <!-- Game Over / Start Message Box -->
            <div id="messageBox" class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-70 transition-opacity duration-300">
                <div class="bg-white p-8 rounded-lg shadow-2xl text-center">
                    <p class="text-4xl font-extrabold text-red-600 mb-4" id="messageTitle">PRESS START</p>
                    <p class="text-lg text-gray-700" id="messageBody">Click START GAME or press Space/Tap to begin!</p>
                    <button id="restartButton" class="mt-4 px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-lg hover:bg-indigo-700 transition transform hover:scale-105">START GAME</button>
                </div>
            </div>
        </div>
    </div>

    <!-- The main game script -->
    <script>
        // --- 1. GAME CONFIGURATION ---
        const PIXEL_SIZE = 4; // Base pixel size for the retro look
        const DOLLARS_PER_SECOND = 10000;

        const GAME_CONFIG = {
            player: {
                width: 40, 
                height: 56,
                x: 100, 
                jumpHeight: 180,
                jumpSpeed: 10,
            },
            obstacles: [
                // Obstacle 1: Auburn (Dark Blue Suit, Blue Tie)
                { id: "obstacle_auburn", name: "Auburn", width: 32, height: 48, speedFactor: 1.05, 
                    colors: { primary: '#03214A', tie: '#0032A0', shirt: '#fff', skin: '#FDDCC0' } 
                }, 
                // Obstacle 2: LSU (Purple Suit, Gold Tie)
                { id: "obstacle_lsu", name: "LSU", width: 32, height: 48, speedFactor: 1.1, 
                    colors: { primary: '#461D7F', tie: '#FDD017', shirt: '#fff', skin: '#FDDCC0' } 
                },    
                // Obstacle 3: Florida (Blue Suit, Orange Tie)
                { id: "obstacle_florida", name: "Florida", width: 32, height: 48, speedFactor: 1.2, 
                    colors: { primary: '#0021A5', tie: '#FA4616', shirt: '#fff', skin: '#FDDCC0' } 
                }, 
                // Obstacle 4: Penn State (Dark Blue Suit, White Tie)
                { id: "obstacle_pennstate", name: "Penn State", width: 32, height: 48, speedFactor: 1.0, 
                    colors: { primary: '#102E50', tie: '#FFFFFF', shirt: '#fff', skin: '#FDDCC0' } 
                }, 
                // Obstacle 5: UCLA (Dark Blue Suit, Gold Tie)
                { id: "obstacle_ucla", name: "UCLA", width: 32, height: 48, speedFactor: 1.15, 
                    colors: { primary: '#2D68C4', tie: '#FFD100', shirt: '#fff', skin: '#FDDCC0' } 
                }
            ],
            gameSettings: {
                initialGameSpeed: 6,
                maxGameSpeed: 30, 
                obstacleSpawnIntervalMin: 70, 
                obstacleSpawnIntervalMax: 140, 
                framesPerSecond: 60, 
                speedBoostIntervalFrames: 600 // 10 seconds * 60 FPS
            }
        };
        
        const DOLLARS_PER_FRAME = DOLLARS_PER_SECOND / GAME_CONFIG.gameSettings.framesPerSecond;

        const GAME_OVER_MESSAGES = {
            "obstacle_ucla": {
                header: "UCLA",
                subheader: "Get ready to be Lincoln Riley's little brother!"
            },
            "obstacle_auburn": {
                header: "Auburn",
                subheader: "You and Cam Newton now have comparable fall-offs."
            },
            "obstacle_florida": {
                header: "Florida",
                subheader: "Second to Satan in the eyes of Tommie Frazier."
            },
            "obstacle_pennstate": {
                header: "Penn State",
                subheader: "Welcome back, James Franklin!"
            },
            "obstacle_lsu": {
                header: "LSU",
                subheader: "Please do not use the lifts."
            }
        };


        // --- 2. SETUP & INITIALIZATION ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const messageBox = document.getElementById('messageBox');
        const messageTitle = document.getElementById('messageTitle');
        const messageBody = document.getElementById('messageBody');
        const restartButton = document.getElementById('restartButton');

        let isGameRunning = false;
        let isGameOver = false;
        let gameFrame = 0;
        let score = 0; 
        let gameSpeed = GAME_CONFIG.gameSettings.initialGameSpeed;
        let player;
        let obstacles = [];
        let nextObstacleFrame = 0;
        let speedBoostsApplied = 0; 
        let GROUND_Y = 0; 

        /** Utility function to draw pixel art based on a 2D array */
        function drawPixelArt(x, y, spriteData, pixelScale, colorMap) {
            
            for (let row = 0; row < spriteData.length; row++) {
                for (let col = 0; col < spriteData[row].length; col++) {
                    const colorIndex = spriteData[row][col];
                    
                    if (colorIndex !== 0) { 
                        let color;
                        
                        if (colorMap.type === 'player') {
                            // Player Colors: 1=Hair/Pants/Dark, 2=Coat (Red), 4=Skin
                            color = colorIndex === 1 ? '#1f2937' : 
                                    colorIndex === 2 ? '#DC2626' : 
                                    '#FDDCC0'; 
                        } else {
                            // Obstacle Colors: 1=Suit (Primary), 2=Shirt (White), 3=Tie (Tie Color), 4=Skin
                            color = colorIndex === 1 ? colorMap.primary : 
                                    colorIndex === 2 ? colorMap.shirt : 
                                    colorIndex === 3 ? colorMap.tie : 
                                    colorMap.skin; 
                        }
                        
                        ctx.fillStyle = color;
                        ctx.fillRect(
                            x + col * pixelScale, 
                            y + row * pixelScale, 
                            pixelScale, 
                            pixelScale
                        );
                    }
                }
            }
        }
        
        /** Handles canvas resizing to ensure responsiveness. */
        function handleResize() {
            const containerWidth = canvas.parentElement.clientWidth;
            canvas.width = containerWidth;
            canvas.height = Math.min(containerWidth * (300 / 900), 400); 

            GROUND_Y = canvas.height - 4; 
            
            if (player) {
                player.groundY = GROUND_Y - player.height;
                if (!player.isJumping) {
                    player.y = player.groundY;
                }
            }
        }
        
        // Initial setup calls
        window.onload = () => {
            handleResize();
            player = new Player(GAME_CONFIG.player);

            messageTitle.textContent = "WELCOME TO BUYOUT BASH";
            messageBody.textContent = "Click START GAME or press Space/Tap to begin!";
            restartButton.textContent = "START GAME"; 

            window.addEventListener('resize', handleResize);
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('touchstart', handleTouch);
            restartButton.addEventListener('click', startGame); 
            
            if (player) {
                player.draw(); // Draw the player before the game starts
            }
        };


        // --- 3. GAME CLASSES ---

        class Player {
            constructor(config) {
                this.width = config.width;
                this.height = config.height;
                this.x = config.x;
                this.groundY = GROUND_Y - this.height; 
                this.y = this.groundY;
                this.jumpVelocity = 0;
                this.isJumping = false;
                this.jumpHeight = config.jumpHeight;
                this.jumpSpeed = config.jumpSpeed;

                // 10x14 pixel sprite data for a coach character (1=Dark, 2=Red Coat, 4=Skin)
                this.spriteData = [
                    [0,0,0,1,1,1,1,0,0,0], 
                    [0,0,1,4,4,4,4,1,0,0], 
                    [0,1,4,4,4,4,4,4,1,0],
                    [0,1,2,2,2,2,2,2,1,0], 
                    [0,1,2,2,2,2,2,2,1,0],
                    [0,1,2,2,2,2,2,2,1,0],
                    [0,1,2,2,2,2,2,2,1,0],
                    [0,1,2,2,2,2,2,2,1,0],
                    [0,0,1,1,1,1,1,1,0,0], 
                    [0,0,1,1,1,1,1,1,0,0],
                    [0,1,1,0,0,0,0,1,1,0], 
                    [1,1,0,0,0,0,0,0,1,1], 
                    [1,0,0,0,0,0,0,0,0,1],
                    [0,0,0,0,0,0,0,0,0,0]
                ];
            }

            draw() {
                const drawY = this.y;
                let adjustedSpriteData = this.spriteData.slice(); 

                // Running Animation (Leg switch)
                if (isGameRunning && !this.isJumping) {
                    if (gameFrame % 10 < 5) {
                        adjustedSpriteData[11] = [1,0,0,0,1,1,0,0,1,1]; 
                    } else {
                        adjustedSpriteData[11] = [1,1,0,0,1,1,0,0,0,1];
                    }
                } 

                drawPixelArt(this.x, drawY, adjustedSpriteData, PIXEL_SIZE, { type: 'player' }); 
            }

            update() {
                if (this.isJumping) {
                    this.y += this.jumpVelocity;
                    this.jumpVelocity += 1.0; // Gravity setting

                    if (this.y >= this.groundY) {
                        this.y = this.groundY;
                        this.isJumping = false;
                        this.jumpVelocity = 0;
                    }
                }
            }

            jump() {
                if (!this.isJumping && isGameRunning) {
                    this.isJumping = true;
                    this.jumpVelocity = -Math.sqrt(2 * 1.0 * this.jumpHeight);
                }
            }
        }

        class Obstacle {
            constructor(config) {
                this.config = config;
                this.width = config.width;
                this.height = config.height;
                this.x = canvas.width; 
                this.y = GROUND_Y - this.height;
                this.speedFactor = config.speedFactor;
                this.colors = config.colors;
                this.id = config.id;
                this.name = config.name;

                // Generic 8x12 pixel sprite data for a person in a suit (1=Suit, 2=Shirt, 3=Tie, 4=Skin)
                this.spriteData = [
                    [0,0,1,1,1,1,0,0], 
                    [0,1,4,4,4,4,1,0], 
                    [1,2,3,3,3,3,2,1], 
                    [1,1,2,2,2,2,1,1], 
                    [1,1,1,1,1,1,1,1], 
                    [1,1,1,1,1,1,1,1],
                    [1,1,1,1,1,1,1,1],
                    [1,1,1,1,1,1,1,1],
                    [1,1,0,0,0,0,1,1],
                    [1,1,0,0,0,0,1,1],
                    [0,1,0,0,0,0,1,0],
                    [0,1,0,0,0,0,1,0] 
                ];
            }

            draw() {
                drawPixelArt(this.x, this.y, this.spriteData, PIXEL_SIZE, this.colors);
            }

            update() {
                this.x -= gameSpeed * this.speedFactor;
            }

            checkCollision(player) {
                // Simple AABB collision detection
                return (
                    this.x < player.x + player.width &&
                    this.x + this.width > player.x &&
                    player.y + player.height > this.y && 
                    player.y < this.y + this.height     
                );
            }
        }


        // --- 4. GAME LOGIC & LOOP ---

        /** The main game loop function. */
        function gameLoop() {
            if (isGameOver) return;

            // 1. Clear Canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 2. Update Game State
            gameFrame++;
            
            // Score as Money 
            score += DOLLARS_PER_FRAME;
            scoreDisplay.textContent = `$${Math.floor(score).toLocaleString()}`;


            // Speed Doubling Logic (Every 10 seconds / 600 frames)
            const requiredBoosts = Math.floor(gameFrame / GAME_CONFIG.gameSettings.speedBoostIntervalFrames);
            if (requiredBoosts > speedBoostsApplied) {
                gameSpeed = Math.min(
                    GAME_CONFIG.gameSettings.maxGameSpeed, 
                    gameSpeed * 2
                );
                speedBoostsApplied = requiredBoosts;
                // No notification is shown, per user request.
            }


            // 3. Spawn Obstacles
            if (gameFrame > nextObstacleFrame) {
                const randomConfig = GAME_CONFIG.obstacles[Math.floor(Math.random() * GAME_CONFIG.obstacles.length)];
                obstacles.push(new Obstacle(randomConfig));
                
                const min = GAME_CONFIG.gameSettings.obstacleSpawnIntervalMin;
                const max = GAME_CONFIG.gameSettings.obstacleSpawnIntervalMax;
                nextObstacleFrame = gameFrame + min + Math.random() * (max - min);
            }

            // 4. Update & Draw Player
            player.update();
            player.draw();

            // 5. Update & Draw Obstacles
            obstacles.forEach((obstacle, index) => {
                obstacle.update();
                obstacle.draw();

                // Check Collision
                if (obstacle.checkCollision(player)) {
                    endGame(obstacle.id);
                }

                // Remove obstacles that move off-screen
                if (obstacle.x + obstacle.width < 0) {
                    obstacles.splice(index, 1);
                }
            });
            
            // 6. Request Next Frame
            requestAnimationFrame(gameLoop);
        }

        /** Stops the game and displays game over message. */
        function endGame(obstacleId) {
            isGameRunning = false;
            isGameOver = true;

            const messageData = GAME_OVER_MESSAGES[obstacleId];

            messageTitle.textContent = messageData.header.toUpperCase();
            messageBody.innerHTML = `${messageData.subheader}<br><span class="text-xl font-bold mt-2 block text-gray-900">Final Buyout Value: $${Math.floor(score).toLocaleString()}!</span>`;
            
            restartButton.textContent = "RESTART";
            messageBox.classList.remove('opacity-0', 'pointer-events-none');
        }

        /** Resets and starts the game. */
        function startGame() {
            isGameRunning = true;
            isGameOver = false;
            gameFrame = 0;
            score = 0; 
            gameSpeed = GAME_CONFIG.gameSettings.initialGameSpeed;
            obstacles = [];
            speedBoostsApplied = 0; 
            
            handleResize(); 

            player.y = player.groundY; 
            player.isJumping = false;
            player.jumpVelocity = 0;

            scoreDisplay.textContent = '$0'; 

            messageBox.classList.add('opacity-0', 'pointer-events-none');
            restartButton.textContent = "RESTART";
            
            gameLoop();
        }

        // --- 5. INPUT HANDLERS ---
        
        function handleKeyDown(event) {
            if (event.code === 'Space') {
                event.preventDefault(); 
                if (!isGameRunning && !isGameOver) {
                    startGame();
                } else if (isGameRunning) {
                    if (player) {
                        player.jump();
                    }
                }
            }
        }

        function handleTouch(event) {
            event.preventDefault();
            if (!isGameRunning && !isGameOver) {
                startGame();
            } else if (isGameRunning) {
                if (player) {
                    player.jump();
                    
                }
            }
        }
        
    </script>
</body>
</html>